# fortigate2csv

名前

	Fortigate のログを CSV 形式へ変換する

書式

	fortigate2csv -i <Fortigate log file> -o <out CSV file> [-e "exclude,col1,col2,col3"]

目的
	Fortigate のログファイルは「項目名=値」という形式であるためログを見るときにフィルタを
	かけるなどの扱いが難しい。
	Excel や Access などで扱いやすくする為に、この Perl スクリプトで CSV 形式へ変換する。

変換方法
	fortigate2csv の1行目を perl のパスを合わせ、ファイルに実行権を与える。
	ファイルのエンコードは、入力 UTF-8、出力 cp932 (Shift-JIS) になっている。

	fortigate2csv をカレントディレクトリに置いて
	./fortigate2csv -i <入力ログファイル> -o <出力CVSファイル>
	と実行する。(ログファイル中の項目名を全て抽出するために 1pass (1回目) で
	ファイルを全部読んでから 2pass で CSV へ変換を行うため、動作は遅い)
	実行中は 2000行毎に処理している行数を表示する。

	※必要のない項目の除外
	オプションに -e "col" を付けることで col を出力から除くことができる。
	複数のカラムを除く場合は -e "col1,col2,col3,..." と 「,」 で区切ることで
	指定できる。

動作速度
	多くの場合、最後まで読まなくても全ての項目が現れると考えられるので
	適当なところで 1pass を切り上げることができる。
	90行付近の 

	# last
	#	if ($. >= 1000);

	をコメントアウトすることで、1000 行で 1pass を切り上げることができ、
	コマンドが早く終了する。

制限
	ファイルを 2pass 方式で読み込むため、入力をパイプで受けることができない。
